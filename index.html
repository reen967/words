<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Robot Lexicon: Sentence Constructor</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --bg: #0a0c10; --accent: #00f2ff; --card: #161b22; }
        body { background: var(--bg); color: #c9d1d9; font-family: 'Segoe UI', Tahoma, sans-serif; padding: 30px; }
        .container { max-width: 1100px; margin: auto; }
        .lexicon-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
        .word-selector { background: var(--card); border: 1px solid #30363d; padding: 20px; border-radius: 12px; }
        select { background: #0d1117; color: var(--accent); border: 1px solid #30363d; padding: 10px; width: 100%; border-radius: 6px; font-weight: bold; }
        .meta-data { margin-top: 15px; font-size: 0.85rem; line-height: 1.6; color: #8b949e; }
        .math-block { font-family: monospace; color: #58a6ff; font-size: 0.75rem; background: #000; padding: 8px; border-radius: 4px; margin-top: 5px; }
        .chart-box { background: var(--card); padding: 25px; border-radius: 12px; border: 1px solid #30363d; height: 500px; }
        button { background: var(--accent); color: #0d1117; border: none; padding: 15px 50px; border-radius: 8px; font-weight: 800; cursor: pointer; display: block; margin: 20px auto; transition: transform 0.1s; }
        button:active { transform: scale(0.98); }
        h1 { text-align: center; letter-spacing: 2px; color: #f0f6fc; }
    </style>
</head>
<body>

<div class="container">
    <h1>LEXICON_v1: WORD_SEQUENCER</h1>

    <div class="lexicon-grid">
        <div class="word-selector" id="slot1">
            <label>FIRST WORD</label>
            <select id="w1" onchange="updateMeta(1)">
                <option value="IDLE">IDLE</option>
                <option value="BUSY">BUSY</option>
                <option value="DISCOVERY">DISCOVERY</option>
                <option value="WARNING">WARNING</option>
                <option value="DANGER">DANGER</option>
                <option value="DEAD">DEAD</option>
            </select>
            <div id="meta1" class="meta-data"></div>
        </div>

        <div class="word-selector" id="slot2">
            <label>SECOND WORD</label>
            <select id="w2" onchange="updateMeta(2)">
                <option value="DISCOVERY" selected>DISCOVERY</option>
                <option value="IDLE">IDLE</option>
                <option value="BUSY">BUSY</option>
                <option value="WARNING">WARNING</option>
                <option value="DANGER">DANGER</option>
                <option value="DEAD">DEAD</option>
            </select>
            <div id="meta2" class="meta-data"></div>
        </div>

        <div class="word-selector" id="slot3">
            <label>THIRD WORD</label>
            <select id="w3" onchange="updateMeta(3)">
                <option value="DANGER" selected>DANGER</option>
                <option value="IDLE">IDLE</option>
                <option value="BUSY">BUSY</option>
                <option value="DISCOVERY">DISCOVERY</option>
                <option value="WARNING">WARNING</option>
                <option value="DEAD">DEAD</option>
            </select>
            <div id="meta3" class="meta-data"></div>
        </div>
    </div>

    <button onclick="renderWaveform()">GENERATE SENTENCE WAVEFORM</button>

    <div class="chart-box">
        <canvas id="waveformCanvas"></canvas>
    </div>
</div>

<script>
    const LEXICON = {
        IDLE:      { psi: 0.15, verb: 'GLIDE_SLOW', noun: 'BREATHE', desc: "Low-magnitude living state." },
        BUSY:      { psi: 0.40, verb: 'GLIDE_SMOOTH', noun: 'JITTER', desc: "Background effort with noise." },
        DISCOVERY: { psi: 0.65, verb: 'SNAP', noun: 'STILL', desc: "Sudden focus on new stimulus." },
        WARNING:   { psi: 0.80, verb: 'SURGE', noun: 'THROB_AROUSED', desc: "High-arousal proximity alert." },
        DANGER:    { psi: 0.98, verb: 'SNAP', noun: 'THROB_FAST', desc: "Critical immediate threat." },
        DEAD:      { psi: 0.00, verb: 'FADE', noun: 'FREEZE', desc: "Zero-magnitude state." }
    };

    const MATH = {
        VERBS: {
            SNAP: (t) => 1 - Math.pow(1 - t, 4),
            GLIDE_SMOOTH: (t) => Math.sin(t * Math.PI / 2),
            GLIDE_SLOW: (t) => 3*t**2 - 2*t**3,
            SURGE: (t) => Math.pow(t, 4),
            FADE: (t) => 1 - Math.pow(t, 2),
            STARTUP: (t) => 1
        },
        NOUNS: {
            BREATHE: (T) => Math.sin(T * 1.25) * 0.05,
            JITTER: () => (Math.random() - 0.5) * 0.06,
            STILL: () => 0,
            THROB_AROUSED: (T) => Math.sin(T * 9.5) * 0.1,
            THROB_FAST: (T) => Math.sin(T * 18.0) * 0.12,
            FREEZE: () => 0
        }
    };

    function updateMeta(slot) {
        const val = document.getElementById('w' + slot).value;
        const word = LEXICON[val];
        document.getElementById('meta' + slot).innerHTML = `
            Target Sensation (Ïˆ): <b>${word.psi}</b><br>
            <i>${word.desc}</i>
            <div class="math-block">V: ${word.verb} | N: ${word.noun}</div>
        `;
    }

    let chart;
    function renderWaveform() {
        let points = [];
        let prevPsi = 0;

        for (let i = 1; i <= 3; i++) {
            const word = LEXICON[document.getElementById('w' + i).value];
            const verbFunc = (i === 1) ? MATH.VERBS.STARTUP : MATH.VERBS[word.verb];
            const nounFunc = MATH.NOUNS[word.noun];

            for (let f = 0; f < 60; f++) {
                let s;
                if (f < 25) { // Transition phase
                    let t = f / 25;
                    s = prevPsi + (word.psi - prevPsi) * verbFunc(t);
                } else { // Steady State phase
                    let globalT = ( (i-1) * 60 + f) * 0.1;
                    s = word.psi + nounFunc(globalT);
                }
                points.push(Math.max(0, s));
            }
            prevPsi = word.psi;
        }

        const ctx = document.getElementById('waveformCanvas').getContext('2d');
        if (chart) chart.destroy();
        chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: points.map((_, i) => (i*0.1).toFixed(1) + 's'),
                datasets: [{
                    label: 'PSYCHOLOGICAL_INTENT_S(t)',
                    data: points,
                    borderColor: '#00f2ff',
                    borderWidth: 2,
                    pointRadius: 0,
                    backgroundColor: 'rgba(0, 242, 255, 0.05)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { 
                    y: { min: 0, max: 1.2, grid: { color: '#1b1f24' } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    updateMeta(1); updateMeta(2); updateMeta(3);
    renderWaveform();
</script>

</body>
</html>
